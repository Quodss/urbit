load("@rules_cc//cc:defs.bzl", "cc_library")

cc_library(
    name = "secp256k1",
    srcs = glob(
        allow_empty = False,
        include = [
            "src/**/*.c",
        ],
        exclude = [
            "src/bench.c",
            "src/bench_ecdh.c",
            "src/bench_ecmult.c",
            "src/bench_internal.c",
            "src/bench_recover.c",
            "src/bench_schnorrsig.c",
            "src/bench_sign.c",
            "src/bench_verify.c",
            "src/gen_context.c",
            "src/precompute_ecmult_gen.c",
            "src/tests.c",
            "src/tests_exhaustive.c",
            "src/valgrind_ctime_test.c",
        ],
    ),
    hdrs = glob([
        "include/**/*.h",
        "src/**/*.h",
        "src/**/*.c",
    ],
allow_empty = False,
                ),
    includes = [
        "include",
        "src",
    ],
    local_defines = [
        "ECMULT_WINDOW_SIZE=2",
        "ECMULT_GEN_PREC_BITS=4",
        "ENABLE_MODULE_EXTRAKEYS",
        "ENABLE_MODULE_RECOVERY",
        "ENABLE_MODULE_SCHNORRSIG",
    ],
    visibility = ["//visibility:public"],
)
